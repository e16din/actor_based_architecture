Привет!
-------

Меня зовут Александр и я разрабатываю Android-приложения, на моем счету около 50-ти разного рода приложений, средних, маленьких и больших. 

У меня есть мечта - сделать разработку мобильных приложений простой и убрать оверхед из своих проектов.

Я тут хотел обойти острые углы и сосредоточиться на позитиве, но как-то все получается слишком ванильным, добавлю щепотку гнева.

История
-------

Меня задолбало что для написания простого приложения надо писать горы оторванных от реальности абстракций. Меня задолбало что чем больше становится проект тем сложнее разбираться в его коде. Меня задолбало что я долго разбираюсь с кодом других разработчиков, а другие разработчики долго разбираются с моим кодом. Меня задолбало что подходы призванные упростить работу с кодом, усложняют структуру этого кода. Меня задолбало.. можем продолжить список в комментариях ;)

В итоге я замахнулся на святое - я решил придумать такую архитектуру, которая бы была проста в реализации, очевидно-понятна без лишних объяснений, легко масштабировалась на любого размера проект. И да, чтобы не надо было для этой архитектуры делать громоздкий фреймворк.

Как-то раз с моей женой(она как раз училась на философском) мы завели разговор про объективирование и субъект-субъектные отношения, и тут меня осенило!

А что если описать бизнес процессы не упрощенно и утилитарно, как мы привыкли делать, пишем все с позиции приложения, в лучшем случае с позиции приложения и пользователя, что если полностью описать все субъекты участвующие в бизнес-процессе?

Я переложил философские идеи субъект-субъектного взаимодействия на архитектуру мобильного приложения и получил способ моделирования наиболее полного бизнесс-процесса, на основе моделирования действующих субъектов на каждом экране приложения. 

В последствии я выяснил что у термина "субъект" в разных областях свое значение и это несет некоторую путаницу в смыслах. Я буду говорить о субъектах как о действующих лицах учавствующих в процессе. Или даже давайте сразу использовать термин "действующее лицо", актор.

Решение
-------

В процессе использования приложения есть ряд действующих лиц, акторов.
Само приложение - это актор. Экран приложения - это актор. Пользователь который взаимодействует с экраном приложения - это актор. Сервер - это актор. Операционная система телефона - это актор. 

Наличие этих всех действующих лиц характерно для большинства мобильных приложений (в некоторых приложениях бывает несколько типов пользователей - например заказчик и исполнитель - это разные акторы).

Раньше большинство действующих лиц были за кадром, где-то там в головах разработчиков, менеджеров и бизнеса, а теперь мы моделируем бизнесс-процесс явно описывая взаимодействие всех акторов.

Каждый экран по сути это актор. Он может взаимодействовать с пользователем который тоже актор - например экран показывает пользователю сообщение об ошибке, а пользователь жмет на кнопку "ок". Так же экран может взаимодействовать с сервером - отправить данные, получить данные. Еще он может взаимодействовать с операционной системой телефона - скрыть системную клавиатуру, получить сообщение о сворачивании приложения. Один экран может взаимодействовать с другим экраном - например передавать или получать данные. Само приложение это тоже актор, и любые экраны-акторы могут например сохранять/получать данные из приложения, или подписаться на какое-то глобальное событие.

На такой акторный подход моделирования очень хорошо ложится теория систем, по сути мы явно описываем механизм взаимодействия систем которые учавствуют в работе приложения.

Пример
------
Посмотрим на схему взаимодействия акторов на примере приложения такси:
![taxi_main_screen](taxi_main_screen.svg)

Так как сущность актора неделима и объемна, а создавать God-объект под каждое действующее лицо так себе затея, я использую понятие "действующее лицо" для проектирования и общения, а в коде я использую понятие "агент" - своеобразный интерфейс-адаптер для общения текущего экрана с другими акторами.

Актор един - агентов этого актора может быть сколько угодно в рамках приложения.

Давайте посмотрим на пример кода экрана приложения такси:

- тут будет пример кода и ссылка на класс/или проект

Плюсы
------

На мой взгляд мне удалось задуманное и я нашел способ строить архитектуру приложения без использования различных MV*-подходов и Clean Architecture, просто и понятно, описывая реальные сущности и реальные действия (вместо выдуманных схем и слоев).

Этот подход дает ряд преимуществ: 
- абстракции акторов в коде хорошо понятны любому человеку, так как они описывают реальные сущности - экран, приложение, пользователь, сервер, телефон.
- логика текущего экрана приложения содержится в одном месте и не размазана по разным файлам и слоям (для сложных экранов можно применить композицию)
- порог входа в проект для разработчиков снижается, да и самому в своем старом коде проще ориентироваться
- надо писать меньше кода, разработка ускоряется
- код хорошо структурирован

Такой код легко писать и легко читать. 

Заключение
------------

Я знаю что мою статью будут читать специалисты в области мобильной разработки, и я прошу вас попробовать этот подход на практике, поэкспериментировать с ним, познакомиться с ним на личном опыте.

Я делюсь с вами этими наработками и хочу получить от вас обратную связь, замечания и предложения.

Буду рад если этот подход сделает процесс разработки более простым и удобным для всех нас :)
